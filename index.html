<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eldritch Dossier - Terminal de Investigación</title>
    
    <!-- Librerías base: React, ReactDOM y Babel para procesar JSX -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS para el diseño -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              emerald: { 950: '#022c22' }
            }
          }
        }
      }
    </script>

    <style>
        @keyframes flicker { 0% { opacity: 0.05; } 50% { opacity: 0.02; } 100% { opacity: 0.05; } }
        @keyframes scanline { 0% { bottom: 100%; } 100% { bottom: -100px; } }
        
        body { 
            background-color: black; 
            margin: 0;
            overflow-x: hidden;
            color: #10b981;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        }
        
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #064e3b; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #10b981; }
        
        .crt-overlay {
            pointer-events: none;
            position: fixed;
            inset: 0;
            z-index: 200;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 4px, 3px 100%;
        }
        
        .scanline {
            width: 100%;
            height: 100px;
            z-index: 201;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(255, 255, 255, 0.02) 10%, rgba(0, 0, 0, 0.1) 100%);
            opacity: 0.1;
            position: absolute;
            bottom: 100%;
            animation: scanline 10s linear infinite;
        }

        #root { min-height: 100vh; }
        option { background: #000; color: #10b981; }
        
        input, textarea, select {
            border-radius: 0 !important;
        }
    </style>
</head>
<body>
    <div class="crt-overlay"></div>
    <div class="scanline"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONOS SVG ---
        const Icon = ({ name, className = "w-4 h-4" }) => {
            const icons = {
                search: <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />,
                plus: <path d="M12 4v16m8-8H4" />,
                database: <path d="M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0 1.1.9 2 2 2h12a2 2 0 002-2M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2m-16 5c0 1.1.9 2 2 2h12a2 2 0 002-2m-16 5c0 1.1.9 2 2 2h12a2 2 0 002-2" />,
                save: <path d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />,
                trash: <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />,
                edit: <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />,
                refresh: <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />,
                x: <path d="M6 18L18 6M6 6l12 12" />,
                left: <path d="M15 19l-7-7 7-7" />,
                right: <path d="M9 5l7 7-7 7" />,
                settings: <path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z" />,
                book: <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.168.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5s3.168.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />,
                eye: <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />,
                history: <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />,
                loader: <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83" />
            };
            return (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    {icons[name]}
                </svg>
            );
        };

        const FILENAME = "eldritch_archive_data.json";

        const DangerBadge = ({ level }) => {
            const colors = {
                "Bajo": "text-green-400 border-green-900 bg-green-950/30",
                "Medio": "text-yellow-400 border-yellow-900 bg-yellow-950/30",
                "Alto": "text-orange-500 border-orange-900 bg-orange-950/30",
                "Muy Alto": "text-purple-400 border-purple-900 bg-purple-950/30",
                "Extremo": "text-red-500 border-red-900 bg-red-950/30",
                "Absoluto": "text-red-600 border-red-900 bg-black animate-pulse shadow-[0_0_10px_rgba(220,38,38,0.5)]"
            };
            return (
                <span className={`px-2 py-0.5 rounded border text-[10px] uppercase font-bold tracking-widest ${colors[level] || 'text-gray-400'}`}>
                    Nivel: {level}
                </span>
            );
        };

        const GlitchText = ({ children, className = "" }) => (
            <div className={`relative group inline-block ${className}`}>
                <span className="relative z-10">{children}</span>
                <span className="absolute top-0 left-0 -translate-x-[2px] translate-y-[1px] text-red-500 opacity-0 group-hover:opacity-70 group-hover:animate-pulse z-0">{children}</span>
                <span className="absolute top-0 left-0 translate-x-[2px] -translate-y-[1px] text-cyan-500 opacity-0 group-hover:opacity-70 group-hover:animate-pulse z-0">{children}</span>
            </div>
        );

        function App() {
            const [creatures, setCreatures] = useState([]);
            const [loading, setLoading] = useState(true);
            const [saving, setSaving] = useState(false);
            const [error, setError] = useState(null);
            const [view, setView] = useState('explorer'); 
            const [search, setSearch] = useState("");
            const [selectedCreature, setSelectedCreature] = useState(null);
            const [page, setPage] = useState(1);
            const [showSettings, setShowSettings] = useState(false);
            
            // Credenciales desde LocalStorage
            const [config, setConfig] = useState({
                token: localStorage.getItem("gist_token") || "",
                gistId: localStorage.getItem("gist_id") || ""
            });

            const [isEditing, setIsEditing] = useState(false);
            const [formData, setFormData] = useState({
                id: "", nombre: "", imagen_url: "",
                origen: { cultura: "", mitologia: "", periodo: "" },
                historia: "", descripcion_fisica: "",
                habilidades: [], nivel_peligro: "Bajo", tags: []
            });

            const itemsPerPage = 6;

            const secureRequest = async (url, options = {}) => {
                if (!config.token || !config.gistId) throw new Error("CONFIG_FALTANTE");
                const headers = {
                    'Authorization': `token ${config.token}`,
                    'Accept': 'application/vnd.github.v3+json',
                    ...options.headers
                };
                const response = await fetch(url, { ...options, mode: 'cors', headers });
                if (!response.ok) throw new Error(`HTTP_${response.status}`);
                return await response.json();
            };

            const fetchData = async () => {
                if (!config.token || !config.gistId) {
                    setLoading(false);
                    setShowSettings(true);
                    return;
                }
                setLoading(true); setError(null);
                try {
                    const gist = await secureRequest(`https://api.github.com/gists/${config.gistId}`);
                    const data = JSON.parse(gist.files[FILENAME].content);
                    setCreatures(Array.isArray(data) ? data : []);
                    setLoading(false);
                } catch (err) {
                    setError(err.message === "CONFIG_FALTANTE" ? "Ingresa tus credenciales para continuar" : err.message);
                    setLoading(false);
                }
            };

            useEffect(() => { fetchData(); }, [config.token, config.gistId]);

            const saveSettings = (e) => {
                e.preventDefault();
                localStorage.setItem("gist_token", config.token);
                localStorage.setItem("gist_id", config.gistId);
                setShowSettings(false);
                fetchData();
            };

            const syncWithGist = async (newData) => {
                setSaving(true);
                try {
                    await secureRequest(`https://api.github.com/gists/${config.gistId}`, {
                        method: 'PATCH',
                        body: JSON.stringify({ files: { [FILENAME]: { content: JSON.stringify(newData, null, 2) } } })
                    });
                    setCreatures(newData);
                    setSaving(false);
                    return true;
                } catch (err) {
                    alert(`ERROR DE RED: ${err.message}`);
                    setSaving(false);
                    return false;
                }
            };

            const handleSave = async (e) => {
                e.preventDefault();
                let updated;
                if (isEditing) {
                    updated = creatures.map(c => c.id === formData.id ? { ...formData, updated_at: new Date().toISOString() } : c);
                } else {
                    const id = `ED-${new Date().toLocaleDateString('es-ES').replace(/\//g, '')}-${(creatures.length + 1).toString().padStart(3, '0')}`;
                    updated = [...creatures, { ...formData, id, created_at: new Date().toISOString(), status: "active" }];
                }
                if (await syncWithGist(updated)) { setView('explorer'); setIsEditing(false); }
            };

            const handleDelete = (id) => {
                if (!confirm("¿MARCAR REGISTRO COMO ELIMINADO?")) return;
                // Soft Delete: cambia status en lugar de filtrar
                const updated = creatures.map(c => c.id === id ? { ...c, status: "deleted", updated_at: new Date().toISOString() } : c);
                syncWithGist(updated).then(success => success && setSelectedCreature(null));
            };

            const openEditor = (creature = null) => {
                if (creature) { setFormData(creature); setIsEditing(true); }
                else {
                    setFormData({
                        nombre: "", imagen_url: "", origen: { cultura: "", mitologia: "", periodo: "" },
                        historia: "", descripcion_fisica: "", habilidades: [], nivel_peligro: "Bajo", tags: []
                    });
                    setIsEditing(false);
                }
                setView('editor'); setSelectedCreature(null);
            };

            const filtered = useMemo(() => creatures.filter(c => 
                c.status !== "deleted" && (
                c.nombre?.toLowerCase().includes(search.toLowerCase()) || 
                c.id?.toLowerCase().includes(search.toLowerCase()))
            ), [creatures, search]);

            const currentItems = filtered.slice((page - 1) * itemsPerPage, page * itemsPerPage);
            const totalPages = Math.ceil(filtered.length / itemsPerPage);

            if (loading) return (
                <div className="min-h-screen bg-black flex flex-col items-center justify-center text-emerald-500">
                    <Icon name="loader" className="w-12 h-12 animate-spin mb-4" />
                    <div className="text-xl font-black animate-pulse tracking-[0.3em]">ACCEDIENDO_SISTEMA_SECURE</div>
                </div>
            );

            return (
                <div className="min-h-screen relative overflow-hidden pb-20">
                    <header className="relative z-10 pt-10 pb-6 border-b border-emerald-900/40 px-6 bg-black/60 backdrop-blur-md">
                        <div className="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8">
                            <div onClick={() => setView('explorer')} className="cursor-pointer">
                                <h1 className="text-4xl md:text-5xl font-black tracking-tighter uppercase italic leading-none">
                                    <GlitchText>ELDRITCH DOSSIER</GlitchText>
                                </h1>
                                <p className="text-[9px] text-emerald-800 mt-2 tracking-[0.4em] font-black uppercase">BRIAN_AGUIRRE_SECURED_V3.0</p>
                            </div>
                            <div className="flex items-center gap-4">
                                <button onClick={() => setView('explorer')} className={`px-4 py-2 border text-[10px] font-bold uppercase flex items-center gap-2 ${view === 'explorer' ? 'bg-emerald-500 text-black border-emerald-500' : 'border-emerald-900 text-emerald-900'}`}><Icon name="database" /> Explorar</button>
                                <button onClick={() => openEditor()} className={`px-4 py-2 border text-[10px] font-bold uppercase flex items-center gap-2 ${view === 'editor' ? 'bg-emerald-500 text-black border-emerald-500' : 'border-emerald-900 text-emerald-900'}`}><Icon name="plus" /> Investigar</button>
                                <button onClick={() => setShowSettings(true)} className="p-2 border border-emerald-900 text-emerald-900 hover:text-emerald-500 hover:border-emerald-500 transition-colors"><Icon name="settings" /></button>
                            </div>
                        </div>
                    </header>

                    {error && !loading && (
                        <div className="bg-red-950/20 border-b border-red-900/50 p-4 text-center text-xs font-bold text-red-500 animate-pulse">
                            [ ADVERTENCIA ] : {error}
                        </div>
                    )}

                    {view === 'explorer' ? (
                        <main className="relative z-10 max-w-6xl mx-auto p-8 animate-in fade-in">
                            {filtered.length === 0 ? (
                                <div className="text-center py-20 opacity-30 uppercase font-black tracking-widest italic">No se hallaron registros encriptados</div>
                            ) : (
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                    {currentItems.map(c => (
                                        <div key={c.id} onClick={() => setSelectedCreature(c)} className="group cursor-pointer bg-black border border-emerald-950 hover:border-emerald-500/40 transition-all p-1">
                                            <div className="relative h-48 overflow-hidden border border-emerald-950 bg-emerald-950/5">
                                                <img src={c.imagen_url} className="w-full h-full object-cover grayscale opacity-40 group-hover:grayscale-0 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700" onError={e => e.target.src="https://placehold.co/400x300/000/080?text=SIN_REGISTRO"} />
                                                <div className="absolute top-2 right-2"><DangerBadge level={c.nivel_peligro} /></div>
                                                <div className="absolute bottom-0 left-0 right-0 bg-black/80 p-4 border-t border-emerald-950/50">
                                                    <div className="text-[8px] text-emerald-900 mb-1 font-black tracking-widest">{c.id}</div>
                                                    <h3 className="text-xl font-black text-emerald-500 uppercase italic tracking-tighter">{c.nombre}</h3>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                            {totalPages > 1 && (
                                <div className="mt-12 flex justify-center items-center gap-8 text-[10px] font-black uppercase text-emerald-900">
                                    <button disabled={page === 1} onClick={() => setPage(p => p - 1)} className="p-2 border border-emerald-950 hover:border-emerald-500 disabled:opacity-20"><Icon name="left" /></button>
                                    <span className="tracking-[0.3em]">Archivo {page} de {totalPages}</span>
                                    <button disabled={page === totalPages} onClick={() => setPage(p => p + 1)} className="p-2 border border-emerald-950 hover:border-emerald-500 disabled:opacity-20"><Icon name="right" /></button>
                                </div>
                            )}
                        </main>
                    ) : (
                        <main className="relative z-10 max-w-4xl mx-auto p-8 animate-in slide-in-from-bottom-4">
                            <form onSubmit={handleSave} className="grid grid-cols-1 md:grid-cols-2 gap-8 bg-black border border-emerald-900/40 p-8 shadow-2xl">
                                <div className="space-y-6">
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Identidad del Sujeto</label><input required className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none focus:border-emerald-500" value={formData.nombre} onChange={e => setFormData({...formData, nombre: e.target.value})} /></div>
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Evidencia Visual (URL)</label><input required className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none focus:border-emerald-500" value={formData.imagen_url} onChange={e => setFormData({...formData, imagen_url: e.target.value})} /></div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Cultura</label><input className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={formData.origen.cultura} onChange={e => setFormData({...formData, origen: {...formData.origen, cultura: e.target.value}})} /></div>
                                        <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Mitología</label><input className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={formData.origen.mitologia} onChange={e => setFormData({...formData, origen: {...formData.origen, mitologia: e.target.value}})} /></div>
                                    </div>
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Período de Avistamiento</label><input className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={formData.origen.periodo} onChange={e => setFormData({...formData, origen: {...formData.origen, periodo: e.target.value}})} /></div>
                                    <div>
                                        <label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Clasificación de Amenaza</label>
                                        <select className="w-full bg-emerald-950/20 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={formData.nivel_peligro} onChange={e => setFormData({...formData, nivel_peligro: e.target.value})}>
                                            {["Bajo", "Medio", "Alto", "Muy Alto", "Extremo", "Absoluto"].map(lvl => <option key={lvl} value={lvl}>{lvl}</option>)}
                                        </select>
                                    </div>
                                </div>
                                <div className="space-y-6">
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Trasfondo Críptico (HTML)</label><textarea className="w-full h-24 bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none resize-none" value={formData.historia} onChange={e => setFormData({...formData, historia: e.target.value})} /></div>
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Morfología de la Entidad (HTML)</label><textarea className="w-full h-24 bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none resize-none" value={formData.descripcion_fisica} onChange={e => setFormData({...formData, descripcion_fisica: e.target.value})} /></div>
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Habilidades (Separadas por comas)</label><input className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={formData.habilidades.join(", ")} onChange={e => setFormData({...formData, habilidades: e.target.value.split(",").map(i => i.trim()).filter(Boolean)})} /></div>
                                    <div><label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Etiquetas (Separadas por comas)</label><input className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={formData.tags.join(", ")} onChange={e => setFormData({...formData, tags: e.target.value.split(",").map(i => i.trim()).filter(Boolean)})} /></div>
                                </div>
                                <div className="md:col-span-2 pt-6 border-t border-emerald-900 flex justify-end gap-4 font-black uppercase text-[10px]">
                                    <button type="button" onClick={() => setView('explorer')} className="px-8 py-3 text-emerald-900 hover:text-red-500 transition-colors">Abortar</button>
                                    <button type="submit" disabled={saving} className="px-10 py-3 bg-emerald-900/20 border border-emerald-500 flex items-center gap-2 hover:bg-emerald-500 hover:text-black transition-all">
                                        {saving ? <Icon name="loader" className="animate-spin" /> : <Icon name="save" />} 
                                        {isEditing ? 'Sincronizar Cambios' : 'Registrar Registro'}
                                    </button>
                                </div>
                            </form>
                        </main>
                    )}

                    {selectedCreature && (
                        <div className="fixed inset-0 z-[150] flex items-center justify-center p-4 md:p-8">
                            <div className="absolute inset-0 bg-black/95 backdrop-blur-sm" onClick={() => setSelectedCreature(null)}></div>
                            <div className="relative w-full max-w-5xl bg-black border border-emerald-500/30 shadow-2xl flex flex-col md:flex-row max-h-[90vh] overflow-hidden">
                                <div className="w-full md:w-1/2 relative bg-black">
                                    <img src={selectedCreature.imagen_url} className="w-full h-full object-cover grayscale opacity-50" />
                                    <div className="absolute bottom-6 left-6 border-l-4 border-red-700 pl-4 bg-black/40 p-4">
                                        <div className="text-[10px] text-red-600 font-black uppercase mb-1 tracking-widest">DOSSIER_RESTRINGIDO</div>
                                        <div className="text-xs text-emerald-500 font-mono tracking-widest">{selectedCreature.id}</div>
                                    </div>
                                </div>
                                <div className="w-full md:w-1/2 p-10 overflow-y-auto bg-black flex flex-col gap-6 scrollbar-thin">
                                    <div className="flex justify-between items-start">
                                        <div><h2 className="text-4xl font-black italic text-white uppercase mb-2 tracking-tighter">{selectedCreature.nombre}</h2><DangerBadge level={selectedCreature.nivel_peligro} /></div>
                                        <button onClick={() => setSelectedCreature(null)} className="p-2 hover:text-red-500"><Icon name="x" className="w-8 h-8" /></button>
                                    </div>
                                    <div className="grid grid-cols-3 gap-4 border-y border-emerald-900/30 py-4 text-[10px] uppercase font-black">
                                        <div><div className="text-emerald-900 mb-1">Cultura</div><div className="text-emerald-400">{selectedCreature.origen?.cultura || "???"}</div></div>
                                        <div><div className="text-emerald-900 mb-1">Mitología</div><div className="text-emerald-400">{selectedCreature.origen?.mitologia || "???"}</div></div>
                                        <div><div className="text-emerald-900 mb-1">Período</div><div className="text-emerald-400">{selectedCreature.origen?.periodo || "???"}</div></div>
                                    </div>
                                    <div className="space-y-6">
                                        <div className="space-y-2">
                                            <h4 className="text-[10px] text-emerald-500 font-black uppercase flex items-center gap-2 border-b border-emerald-900 pb-1 tracking-widest"><Icon name="book" /> Análisis de Historia</h4>
                                            <p className="text-xs text-emerald-600 leading-relaxed italic font-serif" dangerouslySetInnerHTML={{ __html: selectedCreature.historia || "S/N" }} />
                                        </div>
                                        <div className="space-y-2">
                                            <h4 className="text-[10px] text-emerald-500 font-black uppercase flex items-center gap-2 border-b border-emerald-900 pb-1 tracking-widest"><Icon name="eye" /> Reporte Morfológico</h4>
                                            <p className="text-xs text-emerald-600 leading-relaxed italic font-serif" dangerouslySetInnerHTML={{ __html: selectedCreature.descripcion_fisica || "S/N" }} />
                                        </div>
                                    </div>
                                    <div className="space-y-4 pt-4 border-t border-emerald-900/30">
                                        <div className="flex flex-wrap gap-2">
                                            {selectedCreature.habilidades?.map(h => <span key={h} className="text-[9px] border border-emerald-900 px-3 py-1 uppercase font-black text-emerald-500 bg-emerald-950/20">{h}</span>)}
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {selectedCreature.tags?.map(t => <span key={t} className="text-[8px] text-emerald-800 font-black italic tracking-widest uppercase">#{t}</span>)}
                                        </div>
                                    </div>
                                    <div className="mt-auto grid grid-cols-2 gap-4">
                                        <button onClick={() => openEditor(selectedCreature)} className="flex items-center justify-center gap-2 py-4 bg-emerald-900/10 border border-emerald-800 text-[10px] font-black uppercase hover:bg-emerald-500 hover:text-black transition-all tracking-widest"><Icon name="edit" /> Modificar</button>
                                        <button onClick={() => handleDelete(selectedCreature.id)} className="flex items-center justify-center gap-2 py-4 bg-red-900/10 border border-red-900 text-[10px] font-black uppercase hover:bg-red-600 hover:text-white transition-all tracking-widest"><Icon name="trash" /> Descartar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* MODAL DE CONFIGURACIÓN */}
                    {showSettings && (
                        <div className="fixed inset-0 z-[250] flex items-center justify-center p-4">
                            <div className="absolute inset-0 bg-black/95" onClick={() => setShowSettings(false)}></div>
                            <form onSubmit={saveSettings} className="relative w-full max-w-md bg-black border-2 border-emerald-500 p-8 shadow-[0_0_100px_rgba(16,185,129,0.2)]">
                                <h3 className="text-xl font-black uppercase mb-6 flex items-center gap-3"><Icon name="settings" className="w-6 h-6" /> Configuración de Enlace</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">GitHub Access Token</label>
                                        <input type="password" required className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={config.token} onChange={e => setConfig({...config, token: e.target.value})} />
                                    </div>
                                    <div>
                                        <label className="text-[9px] uppercase font-black text-emerald-900 block mb-1">Gist ID</label>
                                        <input required className="w-full bg-emerald-950/10 border border-emerald-900 p-3 text-xs text-emerald-400 outline-none" value={config.gistId} onChange={e => setConfig({...config, gistId: e.target.value})} />
                                    </div>
                                </div>
                                <div className="mt-8 flex gap-4">
                                    <button type="button" onClick={() => setShowSettings(false)} className="flex-1 py-3 text-[10px] font-black uppercase border border-emerald-900 text-emerald-900 hover:text-red-500">Cerrar</button>
                                    <button type="submit" className="flex-1 py-3 bg-emerald-500 text-black text-[10px] font-black uppercase hover:bg-white transition-all">Establecer Enlace</button>
                                </div>
                            </form>
                        </div>
                    )}

                    <footer className="fixed bottom-0 left-0 right-0 p-4 border-t border-emerald-950 bg-black/80 flex justify-between items-center px-10 text-[9px] font-black text-emerald-950 tracking-[0.3em] uppercase backdrop-blur-md z-[120]">
                        <div className="hidden sm:block">STATUS_OS // BUILD_3.0.0_STABLE</div>
                        <div className="animate-pulse flex items-center gap-3">
                            <div className={`w-1.5 h-1.5 rounded-full shadow-[0_0_5px_#10b981] ${creatures.length > 0 ? 'bg-emerald-500' : 'bg-red-600 animate-ping'}`}></div>
                            {creatures.length > 0 ? `VÍNCULO_GIST_ACTIVO` : 'ESPERANDO_CREDENCIALES'}
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
